/**
  ******************************************************************************
  * @file    Templates/Inc/main.h 
  * @author  MCD Application Team
  * @version V1.0.0
  * @date    22-April-2016
  * @brief   Header for main.c module
  ******************************************************************************
  * @attention
  *
  * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
  *
  * Redistribution and use in source and binary forms, with or without modification,
  * are permitted provided that the following conditions are met:
  *   1. Redistributions of source code must retain the above copyright notice,
  *      this list of conditions and the following disclaimer.
  *   2. Redistributions in binary form must reproduce the above copyright notice,
  *      this list of conditions and the following disclaimer in the documentation
  *      and/or other materials provided with the distribution.
  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  *      may be used to endorse or promote products derived from this software
  *      without specific prior written permission.
  *
  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  *
  ******************************************************************************
  */
  
/* Define to prevent recursive inclusion -------------------------------------*/
#ifndef __MAIN_H
#define __MAIN_H

/* Includes ------------------------------------------------------------------*/
#include "delay.h"
#include "usart.h"
#include "wm8978.h"	 
#include "recorder.h"
#include "led.h"
#include "nfc.h"
#include "button.h"
#include "arm_math.h"
#include "fir2.h"
#include "audioDataTransProcess.h"
#include "env.h"


/* Exported types ------------------------------------------------------------*/
#define WHITE_NOISE_LENGTH 440
#define SampleRate 44100

typedef enum
{
	DEVICE_WORK_NOFLITER = 0,
	DEVICE_WORK_CONFIGURATION,
	DEVICE_WORK_WITH_FLITER,
	DEVICE_WORK_WITH_DEFAULT_FILTER,
	DEVICE_WORK_ERROR
}DEVICE_WORK_MODE;

/* Exported constants --------------------------------------------------------*/
#define BLOCK_SIZE SAI_RX_DMA_BUF_SIZE / 4
#define NUM_TAPS 256
#define STD_LESS_DB 10

static int16_t *MUSIC = NULL;
static int16_t *VOCAL = NULL;

const static int WHITE[882] = {9710, 2542, 10129, 1732, 5223, 5521, 8638, -1084, 11428, 8253, 13091, 11514, 4023, 1504, -11610, -15332, -9215, -14887, -19348, -9928, -18426, -20453, -10956, -16959, -8210, -20078, -18500, -13288, -20155, -14954, -13113, -7646, -9537, -11191, 5257, -577, 10855, 14575, 11664, 5463, 10108, 819, 1111, 3710, 599, 13125, -1122, 12663, 16491, 15155, 7463, 14813, 1156, 2441, 2229, 2993, 14846, 11489, 5224, 12262, 2080, -1650, 4477, 14092, 19084, 22118, 19904, 26983, 23461, 21414, 21608, 9262, 18105, 7489, 7998, 13815, 16998, 11175, 8470, 11192, -649, 6718, 8547, 11699, 17946, 18721, 14370, 395, 7943, 14966, 10565, 13000, 8029, 15419, 7524, 12660, 4872, 2523, 11802, 4534, 17035, 4113, 11594, 12111, 16818, 11277, 12334, 839, -793, -110, -11108, -14704, -15083, -11579, 5312, 3767, 8510, 3999, 1331, -3950, -3003, -3946, -3198, 1955, -4480, 3842, 7543, -5880, 1062, -238, 11913, 5774, 5400, 12821, 15431, 8570, 369, -8366, -13405, -4972, -6760, -9383, 5864, 2908, -10135, -11785, -9132, -10484, -7576, -1233, 13426, 11706, 13195, 14348, 4857, 13388, 6645, 4551, -732, 4004, 3502, -8827, -11181, -1808, -7174, 6847, -1700, -6758, 1949, -10827, 2367, -14300, -8094, -7002, -2981, 3551, 8782, 6576, 1262, -8358, -7594, -9267, -1262, -16738, -18078, -14140, -19333, -23348, -21936, -3767, -14975, -1528, -7843, 4513, 623, -5645, -13798, -5397, -13081, -13527, 1707, -1207, 4916, 3264, -2284, 2342, 4948, 8549, 7745, 19044, 13344, 13357, 20234, 18569, 10903, 9385, 10667, -10827, -5389, -18452, -20851, -17022, -17078, -15802, -11498, 4860, 4928, 7298, 2167, -1718, -492, 1410, -4199, -11646, 12, -12229, -3710, -5043, 10290, -2519, 9031, 17543, 17696, 17461, 14445, 4495, -8639, -9281, -5184, -15985, -15597, -14850, -7681, -11524, 1210, 3643, -7411, 5587, -7536, 2556, 8612, 2008, 6187, -9089, -7386, -14635, -17231, -3829, -10217, -9054, 733, -16173, -14723, -17808, -6688, -12672, -4064, 5886, 3519, 8733, 14883, 11379, 7070, 279, 2194, -56, 8366, 3006, -8902, -4568, -2272, -5935, -2580, -3612, 8850, 7990, -334, 11811, 17524, 9383, 18899, 17597, 23990, 16691, 16180, 21178, 13699, 17459, 23608, 13439, 21273, 15080, 21611, 5805, 20726, 14816, 13503, 18168, 15470, 2428, -6339, -1913, -10237, -531, 5161, 8560, 5006, 11172, 6625, 232, 3306, -7376, 3075, -11580, -9364, -9997, -17857, -21064, -13563, -19605, -11525, -9246, -1574, 1852, -8261, -2350, 7156, 9348, 4295, 12839, 12778, 5478, 5353, 14358, 7551, 12088, 14777, 16117, 17129, 21481, 9637, 19369, 22193, 21893, 29912, 32374, 29743, 27650, 28788, 21020, 19108, 21255, 20809, 22767, 24874, 18858, 20857, 17850, 20392, 11187, 14795, -300, -10097, -6035, -17563, -16145, -3559, -16640, -6800, -5821, -7126, -14412, -12410, -10824, -9079, 1562, 2396, 3426, 5123, 10538, 6427, -2047, 5807, 10296, -2222, 8954, -6649, 4329, -6927, -8884, 911, 9583, 10504, 17646, 12801, 14153, 7821, 1517, -490, 15471, 12471, 5640, 15623, 10442, 8387, -2540, 9378, 6639, 7761, -1953, 1396, 7730, -3853, 1479, 7865, 6291, -1232, -11670, -8967, -5425, -7440, 2535, 8970, 3623, 4646, -9759, -9043, -14528, -3995, 2916, -7354, -2898, -12956, -16699, -14179, -4326, -7445, -10952, 510, 1299, 7386, 10788, 10215, 9406, 6303, -53, -1456, 10063, 11456, 17895, 20956, 20858, 11955, 13474, 7240, -5035, 3282, 6467, 11020, -4990, 1209, 4928, 2806, -6937, 4042, 3699, -4874, 10489, 8270, -981, -6428, -9088, 4351, 6910, -5337, -5688, -8935, -6839, -2350, -3969, 908, 7995, -5405, -7271, -3603, -16311, -16460, -20573, -7901, -14180, -19094, -19723, -23512, -15391, -22392, -14591, -4872, -7091, -13952, -4370, 1160, -949, -9441, -3556, 9753, 6043, 2084, 5845, -7655, -3028, 1801, 16241, 18305, 7767, 17628, 14461, -4116, -3323, 7554, -8272, 7101, -3822, -7000, -4834, -6979, -12909, -3458, -11199, 1492, -10561, 6947, -7388, 10557, 11443, 5871, 6895, -7724, -7701, -4524, 697, 5891, 9348, 5519, 805, 4604, 12904, -1605, 4683, 7616, 17774, 12192, 7022, 17383, 16714, 17327, 18757, 3130, 16733, 12465, 8072, 14596, 13849, -209, -397, 5321, -2399, 1883, -3273, 779, 502, -5524, 2476, 8483, 8676, -1624, 8273, -6385, -8282, 625, 10224, 10717, -2718, -828, 5113, -2620, 8535, -7226, -4999, -1225, 5182, -3340, 9076, -3918, 9845, 8339, 3585, -6348, -8721, -7300, -7882, -14591, -9391, 3330, -10838, 1288, 2734, 6416, 1522, -7754, 1458, -10082, -13282, -14196, -9286, -8211, -2277, 4689, 2951, 11542, 5692, 12640, 10583, 14006, 23871, 23592, 23659, 15026, 24433, 16322, 18177, 10040, 3902, -618, -8847, -6728, 1949, -9469, -9372, -6468, -14809, -8549, 2286, -8926, 2226, -8079, -6104, -2540, -2793, 641, 9237, -36, 11929, 13603, 7130, 18539, 9955, 21455, 19252, 16712, 7090, 12445, 3576, -3183, 11253, 7266, 1202, -6662, -10332, -2726, -5393, -5074, -2768, -2985, 7758, 4879, 354, 2608, 7827, -7606, -4874, -2404, 6334, -9296, -6293, -2317, -5091, -1943, -6031, -6651, -10575, -1992, -7479, -10149, 7360, -5357, 8343, 664, -2863, -11918, -12918, -13849, -9735, 2261, -6167, -4193, -951, -2983, 1976, -6427, 2476, 1801, 14143, 12738, 14568, 15112, 1783, 5579, 743, 10626, 689, 640, -2101, -1598, 14332, 19399, 21525, 18814, 18122, 13876, 3481, 4734, 1185, 7172, 18476, 9295, 22230, 22144, 21200, 18445, 14623, 10016, -92, 5100, 13663, 10929, 6595, 2420, -4759, 8044, -4305, -6931, 5, -240, -2566, 3781, -2366, 3048, -2680, 4555, 4974, 15222, 13230, 9742, 9743, 14443, 18446, 16305, 4836, 5993, -5258, 7464, -4532, -996, -6012, -3457, -357, -12303, -6976, -13646, -13234, 3026, -5815, 2772, -8179, 3909, 778, 4027, 2253, 8675, -1725, 1117, 16554, 13705, 9723, 12062, 13322, 17309, 13858, 6249, 16804, 8310, 4093, 13081, -374, 945, 7097, 16502, 17086, 14683, 16070, 11536, 3927, -1442, -8460, -9636, 5931, -9578, -2266, 2946, 3561, 556, 12123, 6393, 475, 7409, 11541, 1238, -7043, 5558, -7114, 5228, 857, 9681, -2348, 12810, 13898, 13930, 12717, 18278, 11452, 11770, 2280, -9198, -4311, -11396, 4312, 789, -6670, 6655, -9160, 4504, -6846, 3862, 265, 1371, -7429, 228, 4348, -6538, -8479, 6347, 2257};




/* Exported macro ------------------------------------------------------------*/
/* Exported functions ------------------------------------------------------- */
void AudioProcessWithFliter(void);
void AudioProcessWithoutFliter(void);
void Toggle_Leds(int led);
void apps(void);
void updataFliterParamer(void);
void updataFliterParamerTest(int *leftBuffer, int *rightBuffer);
void getDefaultFilterParamer(void);
void SystemAndHardwareInit(void);
void FliterInit(void);
void SetCodecVolume(uint32_t leftVol, uint32_t rightVol);//leftVol, rightVol
void getVolumeDifference(void);
void scan_Key(void);
	
//void MM3_5(void);

#endif /* __MAIN_H */

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
